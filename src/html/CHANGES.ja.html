<?xml version="1.0" encoding="euc-jp" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<title>RubyCocoa - CHANGES</title>
<meta http-equiv="Content-type" content="text/html; charset=euc-jp" />
<link href="rdtext.css" type="text/css" rel="stylesheet" />
</head>
<body>
<h1><a name="label:0" id="label:0">変更点</a></h1><!-- RDLabel: "変更点" -->
<h2><a name="label:1" id="label:1">0.2.7からのおもな変更点</a></h2><!-- RDLabel: "0.2.7からのおもな変更点" -->
<h3><a name="label:2" id="label:2">[INPROVE] Jaguar (Mac OS X 10.2)に対応。</a></h3><!-- RDLabel: "[INPROVE] Jaguar (Mac OS X 10.2)に対応。" -->
<ul>
<li>Jaguar付属のRuby 1.6.7のみで実行可能</li>
<li>Jabuar付属のDeveloper Toolsのみでソースからの構築が可能</li>
<li>構築にrubyのソース配付は不要</li>
<li>LibRuby.frameworkを廃棄</li>
<li>RubyCocoa.frameworkを廃棄</li>
<li>Ruby構築時に <kbd>--enabled-shared</kbd> の指定は不要</li>
</ul>
<h2><a name="label:3" id="label:3">0.2.6からのおもな変更点</a></h2><!-- RDLabel: "0.2.6からのおもな変更点" -->
<p>[CHANGES] NS関数・定数の Mac OS X 10.2 対応。NSAppleScriptなど。</p>
<p>[CHANGES] NSSoundを使っているサンプルの Mac OS X 10.2 対応。</p>
<p>[BUGFIX] TOPレベル以外で定義したCocoaの派生クラスのインスタンスを作る
ことができない問題を解決した。</p>
<pre>module MyModule
  class AppController &lt; OSX::NSObject
  end
end</pre>
<p>[BUGFIX] NSStringとの文字列変換のとき、中間に\0を含む文字列を正しく処
理するようにした。</p>
<p>[CHANGES] Objective-CとRubyの間でのオブジェクト変換ができなかったとき
場合、例外OSX::OCDataConvExceptionを発生させるようにした。</p>
<h2><a name="label:4" id="label:4">0.2.5からのおもな変更点</a></h2><!-- RDLabel: "0.2.5からのおもな変更点" -->
<p>[BUGFIX] BOOLを返すオーバライドメソッドが正常に動いてなかった(はず)の
バグを修正。</p>
<p>[IMPROVE] Cocoaのグローバル関数変数のラッバー自動生成スクリプトを改良。
その結果"not implemented"なCocoaのグローバル関数変数が減少。新しくサポー
トしたものにはNSGenericException系列,NSUnionRange系列などが含まれる。</p>
<p>[IMPROVE] ドキュメントベースアプリケーション用のProjectBuilderテンプレー
トを追加。</p>
<p>[CHANGE] ProjectBuilderテンプレートの名前を変更。</p>
<p>[CHANGE] 純粋なRubyのオブジェクトを引数として使う場合のために、
Objective-Cメソッドの引数の型がObjective-Cオブジェクトの場合の振る舞い
を変更。</p>
<p>[IMPROVE] シートパネル対応を改良。Callbuckされるメソッドには
"_returnCode_contextInfo"で終る名前をつける必要がある。</p>
<p>[IMPROVE] ローカライズ文字列用のモジュール関数を定義</p>
<pre>OSX::NSLocalizedStringFromTableInBundle
OSX::NSLocalizedStringFromTable
OSX::NSLocalizedString</pre>
<p>[IMPROVE] セレクタ名が'_'で始まるメソッド(例えば"_transparency")の呼び
出しに対応</p>
<p>[IMPROVE] バージョン情報のサポート</p>
<pre>OSX::RUBYCOCOA_VERSION
OSX::RUBYCOCOA_RELEASE_DATE</pre>
<h2><a name="label:5" id="label:5">0.2.4からのおもな変更点</a></h2><!-- RDLabel: "0.2.4からのおもな変更点" -->
<p>[BUGFIX] NSString.availableStringEncodingsが落ちるバグを修正</p>
<p>[BUGFIX] スーパークラスに存在しないメソッドをns_overridesの引数に与え
たときに落ちるバグを修正</p>
<p>[IMPROVE] NSOpenPanel, NSSavePanel, NSPrintPanel のシートパネルに対応</p>
<p>[CHANGE] テンプレートにPureEmptyApp.appを追加。これはEmptyApp.appから
NIBファイルに関する内容を取り除いたもの。</p>
<h2><a name="label:6" id="label:6">0.2.3からのおもな変更点</a></h2><!-- RDLabel: "0.2.3からのおもな変更点" -->
<p>[BUGFIX] オーバーライドしたメソッドの引数の扱いに関するバグを修正。
(Chrisさんありがとう)</p>
<p>[BUGFIX] オーバーライドしたメソッドから<var>self</var>を返すコードなどがう
まく動かないバグを修正した。次のようなコードが期待どおり動くようになっ
た。</p>
<pre>class MyView &lt; OSX::NSView

  ns_overrides :initWithFrame_

  def initWithFrame (frame)
    suuper_initWithFrame (frame)
    self
  end</pre>
<h2><a name="label:7" id="label:7">0.2.2からのおもな変更点</a></h2><!-- RDLabel: "0.2.2からのおもな変更点" -->
<p>[BUGFIX] オブジェクト生成時にメモリを4バイト破壊していたバグを修正。
(Chrisさんありがとう)</p>
<p>[CHANGE] Rubyスレッド切り替え(OSX.ruby_thread_switcher_start)を改良。</p>
<h2><a name="label:8" id="label:8">0.2.1からのおもな変更点</a></h2><!-- RDLabel: "0.2.1からのおもな変更点" -->
<p>0.2.1 のインストールスクリプトの重大なバグを修正</p>
<p>[CHANGE] RubyCocoaフレームワークをインストールするディレクトリの指定方
法を以下のように変更</p>
<pre>% ruby install.rb config --frameworks=/Network/Library/Frameworks</pre>
<h2><a name="label:9" id="label:9">0.2.0からのおもな変更点</a></h2><!-- RDLabel: "0.2.0からのおもな変更点" -->
<p>[IMPROVE] RubyCocoaアプリケーションでRubyスレッドを切替えるための仕組
みをテスト的に実装。</p>
<p>[IMPROVE] オーバーライドしたメソッド定義の中でスーパークラスの同メソッ
ドを呼ぶ機能をテスト的に実装。</p>
<pre>def drawRect (frame)
  super_drawRect (frame)
end</pre>
<p>[BUGFIX] オーバーライドメソッドの戻り値に関する小バグを修正。</p>
<p>[IMPROVE] RubyCocoaフレームワークのインストール先をオプションで指定で
きるようにした。</p>
<pre>% ruby install.rb config -- --frameworks=/Network/Library/Frameworks</pre>
<h2><a name="label:10" id="label:10">0.1.3からのおもな変更点</a></h2><!-- RDLabel: "0.1.3からのおもな変更点" -->
<h3><a name="label:11" id="label:11">仕様/実装</a></h3><!-- RDLabel: "仕様/実装" -->
<p>[CHANGE] OSX::OCObject は裏方になった。</p>
<p>[CHANGE] Cocoa クラスを Ruby のクラスとして定義。</p>
<pre>OSX::NSObject.is_a? Class # =&gt; true
OSX::NSObject.name        # =&gt; "OSX::NSObject"</pre>
<p>[CHANGE] OSX::OCObject#ib_loadable を廃止。Cocoa クラスの派生クラスの
定義を、Ruby の派生クラスの定義と同様の方法で書けるように変更。</p>
<pre>class Hoge &lt; OSX::NSView
  ns_outlets   :hoge
  ns_overrides :drawRect_
  ...
end</pre>
<p>[CHANGE] Cocoa派生クラス#ns_overrides の引数にシンボルを使用可。ただし
引数に対応する"_"の省略はできない。(上記例のdrawRect)</p>
<p>[CHANGE] 上記変更の基盤として OSX::ObjcID クラス、OSX::OCObjWrapperモ
ジュールを追加 (通常これらは直接使うものではない)</p>
<p>[CHANGE] lib/osx/objcディレクトリを作り、Ruby側ライブラリの本体はその
中に置くようにした。</p>
<p>[CHANGE] C側ライブラリ名を"osxobjc.bundle"から"osx_objc.bundle"に変更。
RubyAEOSAと統一。</p>
<h3><a name="label:12" id="label:12">ドキュメント</a></h3><!-- RDLabel: "ドキュメント" -->
<p>リファレンスマニュアルを加えました。使い方にクラス定義に関する記述を加
えました。</p>
<h2><a name="label:13" id="label:13">0.1.2からのおもな変更点</a></h2><!-- RDLabel: "0.1.2からのおもな変更点" -->
<h3><a name="label:14" id="label:14">実装</a></h3><!-- RDLabel: "実装" -->
<p>[IMPROVE] コンパイル速度が大幅アップ (Chrisさんどうも)</p>
<p>[IMPROVE] Cocoaオブジェクトのメソッド実行時に発生した例外をRubyの例外
として発生させる機能を実装 (Chrisさんどうも)</p>
<h3><a name="label:15" id="label:15">その他</a></h3><!-- RDLabel: "その他" -->
<p>FAQに数項目追加</p>
<h2><a name="label:16" id="label:16">0.1.1からのおもな変更点</a></h2><!-- RDLabel: "0.1.1からのおもな変更点" -->
<h3><a name="label:17" id="label:17">実装</a></h3><!-- RDLabel: "実装" -->
<p>[BUGFIX] ib_loadalbeの中でObjective-Cのクラスを動的生成するさいのメモ
リ割り当てに関するバグを修正。</p>
<p>[CHANGE] 0.1.0の「<code>ib_lodable</code>なクラス定義の初期化メソッド
<code>initialize</code> に引数を渡す仕組み」を廃止。Ruby側のinitializeには
ObjC側のinitXXXの引数は渡りません。</p>
<p>[IMPROVE] NSRange(Cocoa)とRange(Ruby)の変換をサポート(Chrisさんどうも)</p>
<h3><a name="label:18" id="label:18">その他</a></h3><!-- RDLabel: "その他" -->
<p>サンプルにmultinibを追加 (Lucさんどうも)</p>
<h2><a name="label:19" id="label:19">0.1.0からのおもな変更点</a></h2><!-- RDLabel: "0.1.0からのおもな変更点" -->
<h3><a name="label:20" id="label:20">実装</a></h3><!-- RDLabel: "実装" -->
<p>[IMPROVE] 必要なときにRubyのNumericからCocoaのNSDecimalNumberへの変換
を行う。(「Learning Cocoa CH.9」対応)</p>
<p>[IMPROVE] (0.1.2で廃止) <code>ib_lodable</code>なクラス定義の初期化メソッド
<code>initialize</code> に引数を渡す仕組みを準備。実際に使っているのは 
<code>ib_loadable :NSView</code> のときのみ。</p>
<h3><a name="label:21" id="label:21">その他</a></h3><!-- RDLabel: "その他" -->
<p>サンプルdotviewを"Lerning Cocoa"の8章を読みながら書き直した。</p>
<p>"Lerning Cocoa"に相当するサンプルExpenses.appを追加。</p>
<p>テンプレート類をサンプルディレクトリからテンプレートディレクトリに移動。</p>
<p>Empty.app をテンプレートに追加。これをコピーして使えば、make や
pbxbuildを使わず、Rubyスクリプティングとnibファイルなどの変更のみで
Cocoaアプリケーションを作成可能。</p>

</body>
</html>
